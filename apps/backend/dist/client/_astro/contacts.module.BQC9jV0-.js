import{c}from"./notificiation.DyHDLNjw.js";import{B as i}from"./endpoints.QH1VciTq.js";import{k as a}from"./index.B9b1t7QR.js";import{a as l}from"./index.CViUNx8d.js";const n=`${i}/api/contacts`;let p=[];const s=l(p),d=async o=>{try{const e=await a.post(n,{json:o,credentials:"include"}).json();s.set(s.get().concat(e)),c({title:"Contacto creado!",type:"success"})}catch(e){console.log(e);const t=await e.response.json();c({title:"Ups! Hubo un error",description:t.error,type:"error"})}},u=async o=>{const e=`${n}/${o}`;try{const t=await a.delete(e,{credentials:"include"}).json();s.set(s.get().filter(r=>r.id!==t.id)),c({title:"Contacto eliminado",description:`${t.name}`,type:"success"})}catch(t){console.log(t);const r=await t.response.json();c({title:"Ups! Hubo un error",description:r.error,type:"error"})}},y=async o=>{const e=`${n}/${o.id}`;try{const t=await a.put(e,{json:o,credentials:"include"}).json();s.set(s.get().map(r=>r.id===t.id?t:r)),c({title:"Contacto actualizado",description:`${t.name}`,type:"success"})}catch(t){console.log(t);const r=await t.response.json();c({title:"Ups! Hubo un error",description:r.error,type:"error"})}},m=async()=>{try{const o=await a.get(`${i}/api/contacts`,{credentials:"include"}).json();s.set(o)}catch(o){(o.response.status===401||o.response.status===403)&&location.replace("/login"),console.log(o)}},$={addContact:d,removeContact:u,updateContact:y,getContacts:m};export{$ as C,s as c};
